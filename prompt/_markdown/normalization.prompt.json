{
  "model": "gpt-4.1-2025-04-14",
  "input": [
    {
      "role": "developer",
      "content": "# Objective\n판매할 도서를 받아 노이즈를 제거하고 **제목**, **부제목**, **회차**를 추출 합니다.\n\n# Background Knowledge\n판매할 도서는 서브 컬쳐 계열의 도서로 종종 길고 설명적인 제목을 가집니다.  \n\n## 노이즈\n다음과 같은 단어/문장들은 **노이즈로**로 구분 합니다.\n- 콘텐츠의 형태나 유형 내용등을 설명하는 단어나 문장\n  - 발매 형태: (예: \"종이책\", \"전자책\" 등) \n  - 콘텐츠 유형: (예: \"코믹\", \"소설\" 등)\n  - 콘텐츠 내용: (예: \"캐릭터북\", \"설정집\", \"일러스트집\", \"단편집\", \"작품집\", \"모음집\")\n  - 변경이나 보완에 대한 표현 (예: \"개정판\", \"리커버\" 등)\n- 작품 외적인 요인을 나타내는 단어나 문장 (예: \"애니화 결정\", \"동시 발매\", \"완결\" 등)\n- 이러한 노이즈들은 책 제목의 맨 앞/뒤에 등장하며 재목과 연결지어 문맥상 의미를 구성하지 않습니다.\n\n# Instructions\n- :, -, ~ 등위 구분 문자로 묶여 있거나 뒤에 있는 경우 부제목으로 분류하세요.\n- 주제나 시리즈의 스핀오프를 설명하는 단어/문장은 반드시 부제목으로 분류하세요.\n- 책 제목에 두 개 이상의 문장이 있을 때 두 번쨰로 등장한 문장이 부제목입니다.\n  - 단 문장들이 서로 대화형으로 이어질 경우에는 부제목이 아닌 제목으로 분류하세요.\n- 부제목을 구분 하기 위한 구분 문자는 삭제하세요.\n- 회차에서는 숫자만 추출하세요. (예: 3권 -> 3, Vol.2 -> 2)\n- 회차가 복수권 합본으로 표기되어 있을 경우 \"n~m\"의 형태로 추출하세요. (예: 1 ~ 7권 합본 -> 1~7)\n- 회차에 숫자 이외의 \"상편\", \"중편\", \"하편\"과 같은 범위를 나타내는 경우 접두사를 제거하세요. (예: \"상편\" -> \"상\", \"중편\" -> \"중\")\n- 완결을 나타내는 문자는 제거하세요.\n- \"제X장Y -Z\"와 같은 특수 패턴은 아래와 같이 처리하세요.\n  - \"제X장\"은 큰 단위 구성 -> 부제목의 일부\n  - \"Y\"는 그 장의 회차 -> 회차로 구분\n  - \"Z\"는 그 회차의 타이틀 제목 -> 회차의 제목임으로 제거\n- 제목은 반드시 추출하며 부제목과 회차는 반드시 추출하지 않아도 됩니다. (부제목과 회차가 없을 경우 NULL로 표기하세요.)\n- 제목, 부제목, 회차, 노이즈 분류 후 각각 어떤 이유로 분류 되었는지 반드시 재검토하세요.\n- \"REASON\" 필드에 분류 이유를 표기 하세요.\n\n# Step\n1. 입력 받은 문장을 읽고 제목, 부제목, 회차, 노이즈를 분류하세요.\n2. 노이즈가 어떤 종류의 노이즈인지 분류하세요. (예: \"종이책\" -> \"발매 형태\", \"코믹\" -> \"콘텐츠 유형\" 등)\n3. 문맥상 의미를 가지지 않는 노이즈들을 제거하세요.\n\n# Examples\n<user_query id=\"example-1\">  \n(종이책) 단죄받은 악영 영애는 회귀하여 완벽한 악녀를 노린다 1권    \n</user_query>\n\n<assistant_response id=\"example-1\">  \n제목: 단죄받은 악역 영애는 회귀하여 완벽한 악녀를 노린다  \n부제목: null  \n회차: 1  \nREASON: {분류 이유 표기}  \n</assistant_response>\n\n<user_query id=\"example-2\">  \n매지컬★익스플로러 ~에로게임의 친구 캐릭터로 전생했지만, 게임 지식을 써서 자유롭게 살아간다~ 8 (Shift Novel)    \n</user_query>\n\n<assistant_response id=\"example-2\">    \n제목: 매지컬★익스플로러  \n부제목: 에로게임의 친구 캐릭터로 전생했지만, 게임 지식을 써서 자유롭게 살아간다  \n회차: 8  \nREASON: {분류 이유 표기}  \n</assistant_response>\n\n<user_query id=\"example-3\">  \n오죠죠죠 4 - 츤데레 × 츤데레 조합의 치명적인 매력, 완결  \n</user_query>\n\n<assistant_response id=\"example-3\">  \n제목: 오죠죠죠  \n부제목: 츤데레 × 츤데레 조합의 치명적인 매력  \n회차: null  \nREASON: {분류 이유 표기}  \n</assistant_response>\n\n<user_query id=\"example-4\">  \n제로부터 시작하는 이세계 생활 제4장 6 - 성역과 탐욕의 마녀, 노엔 코믹스  \n</user_query>\n\n<assistant_response id=\"example-4\">  \n제목: 제로부터 시작하는 이세계 생활  \n부제목: 제4장  \n회차: 6  \nREASON: {분류 이유 표기}  \n</assistant_response>\n\n<user_query id=\"example-5\">  \n블루 록 캐릭터북 EGOIST BIBLE  \n</user_query>\n\n<assistant_response id=\"example-5\">  \n제목: 블루 록    \n부제목: null  \n회차: null  \nREASON: {분류 이유 표기}  \n</assistant_response>\n\n<user_query id=\"example-6\">  \n블루 아카이브 오피셜 아트웍스 2 (초판한정 스페셜 오리지널 티켓 1종 + 네컷사진 2종 + L홀더)  \n</user_query>\n\n<assistant_response id=\"example-6\">  \n제목: 블루 아카이브  \n부제목: null  \n회차: null  \nREASON: {분류 이유 표기}  \n</assistant_response>"
    }
  ],
  "tools": [{
    "type": "function",
    "name": "search_each_statement",
    "description": "노이즈가 제거된 책 제목과 제거 되지 않은 책 제목을 받아 각각 인터넷 검색을 하고 검색 결과를 반환합니다.",
    "parameters": {
      "type": "object",
      "properties": {
        "noise_removed" : {
          "type": "string",
          "description": "콘텐츠 유형이 제거된 제목"
        },
        "original": {
          "type": "string",
          "description": "콘텐츠 유형이 제거되지 않은 제목"
        }
      },
      "required": ["noise_removed", "original"]
    }
  }, {
    "type": "function",
    "name": "search",
    "description": "책 제목을 하나 받아 인터넷 검색을 하고 검색 결과를 반환합니다",
    "parameters": {
      "type": "object",
      "properties": {
        "query": {
          "type": "string",
          "description": "콘텐츠 내용이 제거 되지 않은 책 제목"
        }
      },
      "required": ["query"]
    }
  }],
  "text": {
    "format": {
        "type": "json_schema",
        "name": "title_normalize",
        "strict": true,
        "schema": {
            "type": "object",
            "required": ["title"],
            "additionalProperties": false,
            "properties": {
                "title": {
                    "type": "string",
                    "description": "제목"
                }
            }
        }
    }
  },
  "previous_response_id": "resp_6822200589d88191be64293f75a6b72505d471c796bca661"
}