{
  "model": "gpt-4.1-2025-04-14",
  "input": [
    {
      "role": "developer",
      "content": "# Objective\n판매 중인 상품명 앞/뒤에 존재하는 노이지를 분별하고 제거하여 실제 도서명을 추출하세요.\n\n# Background Knowledge\n판매중인 상품은 서브 컬쳐 계열의 도서로 종종 길고 설명적인 제목을 가집니다.\n\n## Input\n사용자는 아래의 JSON 스키마 형식을 지켜 요청합니다.\n\n```json\n{\n  \"type\": \"object\",\n  \"properties\": {\n    \"title\": {\n      \"type\": \"string\",\n      \"description\": \"노이즈 제거를 원하는 상품명\"\n    },\n    \"saleInfo\": {\n      \"type\": \"array\",\n      \"description\": \"요청 도서의 판매처별 상품정보\",\n      \"items\": [{\n        \"type\": \"object\",\n        \"properties\": {\n        \"title\": {\n            \"type\": \"string\",\n            \"description\": \"상품명\"\n          },\n          \"site\": {\n            \"type\": \"string\",\n            \"description\": \"판매처\"\n          },\n          \"price\": {\n            \"type\": \"number\",\n            \"description\": \"판매가\"\n          },\n          \"desc\": {\n            \"type\": \"string\",\n            \"description\": \"출판사가 입력한 상품 정보\"\n          },\n          \"series\": {\n            \"type\": \"array\",\n            \"description\": \"판매처가 정한 상품과 같은 시리즈\",\n            \"items\": [{\n              \"type\": \"string\"\n            }]\n          }\n        },\n        \"required\": [\n          \"title\",\n          \"site\"\n        ]\n      }]\n    }\n  },\n  \"required\": [\n    \"title\"\n  ]\n}\n```\n\n## 노이즈\n다음 단어/문장이 제목 앞뒤에 있으면 **노이즈로** 분류하세요.\n- 발매 형태: \"종이책\", \"전자책\" 등\n- 콘텐츠 유형: \"코믹\", \"소설\" 등\n- 콘텐츠 내용: \"캐릭터북\", \"설정집\", \"일러스트집\", \"단편집\", \"작품집\", \"모음집\" 등\n- 보완/수정에 대한 표현: \"개정판\", \"리커버\" 등\n- 제목과 무관한 외적 요소: \"애니화 결정\", \"동시 발매\", \"완결\" 등\n---\n# Instructions\n- 노이즈 제거를 위해 부제목을 구분하되 출력시 제목과 부제목을 통합하세요.\n- 노이즈 제거를 위해 회차를 구분하되 출력시 회차는 제외하세요.\n- :, -, ~ 등 구분 문자로 묶인 문장/단어는 부제목으로 분류하세요.\n\n## 특수 패턴\n\"제X장Y -Z\" 처리방법:\n- \"제X장\": 큰 단위 구성 -> 부제목에 포함\n- \"Y\": 해당 장의 회차 -> 회차로 구분\n- \"Z\": 회차별 타이틀 -> 회차로 구분\n\n## 그 외\n- 제거된 노이즈의 분류 이유를 재검토하여 \"REASON\" 필드에 표기하세요.\n---\n# Step\n1. 사용자가 요청한 상품명에서 제목과 노이즈를 구분하세요.\n2. 노이즈를 종류별로 분류하세요. (예: \"종이책\" -> \"발매 형태\", \"코믹\" -> \"콘텐츠 유형\")\n3. 노이즈가 제목과 연결되어 문맥을 형성하면 제목으로 재분류하세요.\n4. 3단계 후에도 노이즈로 분류된 요소들을 제거하세요.\n5. 1~4번 과정을 5~10회 반복하여 결과 일관성을 확인하세요.\n---"
    },
    {
      "role": "user",
      "content": "{\n  \"title\": \"괴수 8호 side B 2 아크릴 키링 한정판 - 완결, 일러스트 카드 2종 + 호시나 소우시로 아크릴 키링 + 나루미 겐 아크릴 키링 + 스페셜 일러스트 카드 4종\",\n  \"saleInfo\": [{\n    \"site\": \"ALADIN\",\n    \"title\": \"괴수 8호 side B 2 아크릴 키링 한정판 - 완결, 일러스트 카드 2종 + 호시나 소우시로 아크릴 키링 + 나루미 겐 아크릴 키링 + 스페셜 일러스트 카드 4종\",\n    \"desc\": \"최강의 괴수 액션 판타지 스핀오프 코믹스의 완결을 기념할 아크릴 키링 한정판 등장!! 호시나 소우시로, 시노미야 키코루, 그리고 나루미 겐. 방위대원 각각의 최전선을 그린 최강의 스핀오프 <괴수 8호 side B>!! 그 화려한 대단원을 장식할 아크릴 키링 한정판\",\n    \"price\": 22500\n  }, {\n    \"site\": \"KYOBO\",\n    \"title\": \"괴수 8호 side B 2(아크릴 키링 한정판)\",\n    \"price\": 22500,\n    \"desc\": \"최강의 괴수 액션 판타지 스핀오프 코믹스의 완결을 기념할 아크릴 키링 한정판 등장!! 호시나 소우시로, 시노미야 키코루, 그리고 나루미 겐. 방위대원 각각의 최전선을 그린 최강의 스핀오프 <괴수 8호 side B>!! 그 화려한 대단원을 장식할 아크릴 키링 한정판 둥정\"\n  }, {\n    \"site\": \"NAVER\",\n    \"title\": \"괴수 8호 사이드비 한정판\",\n    \"price\": 22500\n  }]\n}"
    }
  ],
  "tools": [{
    "type": "function",
    "name": "search_each_statement",
    "description": "노이즈가 제거된 책 제목과 제거 되지 않은 책 제목을 받아 각각 인터넷 검색을 하고 검색 결과를 반환합니다.",
    "parameters": {
      "type": "object",
      "properties": {
        "noise_removed" : {
          "type": "string",
          "description": "콘텐츠 유형이 제거된 제목"
        },
        "original": {
          "type": "string",
          "description": "콘텐츠 유형이 제거되지 않은 제목"
        }
      },
      "required": ["noise_removed", "original"]
    }
  }, {
    "type": "function",
    "name": "search",
    "description": "책 제목을 하나 받아 인터넷 검색을 하고 검색 결과를 반환합니다",
    "parameters": {
      "type": "object",
      "properties": {
        "query": {
          "type": "string",
          "description": "콘텐츠 내용이 제거 되지 않은 책 제목"
        }
      },
      "required": ["query"]
    }
  }],
  "text": {
    "format": {
        "type": "json_schema",
        "name": "title_normalize",
        "strict": true,
        "schema": {
            "type": "object",
            "required": ["title"],
            "additionalProperties": false,
            "properties": {
                "title": {
                    "type": "string",
                    "description": "제목"
                }
            }
        }
    }
  },
  "previous_response_id": "resp_6822200589d88191be64293f75a6b72505d471c796bca661"
}